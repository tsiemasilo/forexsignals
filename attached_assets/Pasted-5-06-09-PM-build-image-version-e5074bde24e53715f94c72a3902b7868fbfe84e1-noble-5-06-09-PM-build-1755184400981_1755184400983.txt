5:06:09 PM: build-image version: e5074bde24e53715f94c72a3902b7868fbfe84e1 (noble)
5:06:09 PM: buildbot version: e5074bde24e53715f94c72a3902b7868fbfe84e1
5:06:09 PM: Fetching cached dependencies
5:06:09 PM: Starting to download cache of 431.7MB (Last modified: 2025-08-14 14:11:51 +0000 UTC)
5:06:11 PM: Finished downloading cache in 1.545s
5:06:11 PM: Starting to extract cache
5:06:18 PM: Finished extracting cache in 7.163s
5:06:18 PM: Finished fetching cache in 8.772s
5:06:18 PM: Starting to prepare the repo for build
5:06:18 PM: Preparing Git Reference refs/heads/main
5:06:20 PM: Custom functions path detected. Proceeding with the specified path: 'netlify/functions'
5:06:20 PM: Custom build command detected. Proceeding with the specified command: 'node build-netlify.js'
5:06:21 PM: Starting to install dependencies
5:06:21 PM: Started restoring cached python cache
5:06:21 PM: Finished restoring cached python cache
5:06:21 PM: Started restoring cached ruby cache
5:06:21 PM: Finished restoring cached ruby cache
5:06:21 PM: Started restoring cached go cache
5:06:22 PM: Finished restoring cached go cache
5:06:22 PM: Started restoring cached Node.js version
5:06:22 PM: Finished restoring cached Node.js version
5:06:23 PM: v20.19.4 is already installed.
5:06:23 PM: Now using node v20.19.4 (npm v10.8.2)
5:06:23 PM: Enabling Node.js Corepack
5:06:23 PM: Started restoring cached build plugins
5:06:23 PM: Finished restoring cached build plugins
5:06:23 PM: Started restoring cached corepack dependencies
5:06:23 PM: Finished restoring cached corepack dependencies
5:06:23 PM: No npm workspaces detected
5:06:23 PM: Started restoring cached node modules
5:06:23 PM: Finished restoring cached node modules
5:06:23 PM: Installing npm packages using npm version 10.8.2
5:06:23 PM: up to date in 444ms
5:06:23 PM: npm packages installed
5:06:24 PM: Successfully installed dependencies
5:06:24 PM: Starting build script
5:06:24 PM: Detected 1 framework(s)
5:06:24 PM: "vite" at version "5.4.19"
5:06:24 PM: Section completed: initializing
5:06:26 PM: â€‹
5:06:26 PM: Netlify Build                                                 
5:06:26 PM: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5:06:26 PM: â€‹
5:06:26 PM: â¯ Version
5:06:26 PM:   @netlify/build 35.0.7
5:06:26 PM: â€‹
5:06:26 PM: â¯ Flags
5:06:26 PM:   accountId: 6786aa5b927658b4b62b93d6
5:06:26 PM:   baseRelDir: true
5:06:26 PM:   buildId: 689dfb605bda8b0008644fdd
5:06:26 PM:   deployId: 689dfb605bda8b0008644fdf
5:06:26 PM: â€‹
5:06:26 PM: â¯ Current directory
5:06:26 PM:   /opt/build/repo
5:06:26 PM: â€‹
5:06:26 PM: â¯ Config file
5:06:26 PM:   /opt/build/repo/netlify.toml
5:06:26 PM: â€‹
5:06:26 PM: â¯ Context
5:06:26 PM:   production
5:06:26 PM: â€‹
5:06:26 PM: â¯ Installing extensions
5:06:26 PM:    - neon
5:06:27 PM: â€‹
5:06:27 PM: â¯ Loading extensions
5:06:27 PM:    - neon
5:06:28 PM: â€‹
5:06:28 PM: build.command from netlify.toml                               
5:06:28 PM: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5:06:28 PM: â€‹
5:06:28 PM: $ node build-netlify.js
5:06:28 PM: ğŸš€ Starting Netlify build process...
5:06:28 PM: ğŸ“¦ Building client...
5:06:28 PM: vite v5.4.19 building for production...
5:06:28 PM: transforming...
5:06:28 PM: Browserslist: browsers data (caniuse-lite) is 10 months old. Please run:
5:06:28 PM:   npx update-browserslist-db@latest
5:06:28 PM:   Why you should do it regularly: https://github.com/browserslist/update-db#readme
5:06:31 PM: âœ“ 1731 modules transformed.
5:06:31 PM: rendering chunks...
5:06:31 PM: computing gzip size...
5:06:31 PM: ../dist/public/index.html                   0.63 kB â”‚ gzip:   0.38 kB
5:06:31 PM: ../dist/public/assets/index-PBLhccIn.css   86.92 kB â”‚ gzip:  14.31 kB
5:06:31 PM: ../dist/public/assets/index-DHehzMJA.js   421.72 kB â”‚ gzip: 127.01 kB
5:06:31 PM: âœ“ built in 2.76s
5:06:31 PM: âœ… Netlify build completed successfully!
5:06:31 PM: ğŸ“ Client built to: dist/public
5:06:31 PM: ğŸ”§ Functions available in: netlify/functions
5:06:31 PM: â€‹
5:06:31 PM: (build.command completed in 3s)
5:06:31 PM: â€‹
5:06:31 PM: Functions bundling                                            
5:06:31 PM: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5:06:31 PM: â€‹
5:06:31 PM: Packaging Functions from netlify/functions directory:
5:06:31 PM:  - admin-signals.mjs
5:06:31 PM:  - admin-user-subscription.mjs
5:06:31 PM:  - admin-users.mjs
5:06:31 PM:  - create-sessions-table.mjs
5:06:31 PM:  - create-signals-table.mjs
5:06:31 PM:  - debug.mjs
5:06:31 PM:  - emergency-login.mjs
5:06:31 PM:  - login.mjs
5:06:31 PM:  - logout.mjs
5:06:31 PM:  - placeholder.mjs
5:06:31 PM:  - plans.mjs
5:06:31 PM:  - server.mjs
5:06:31 PM:  - setup-database.mjs
5:06:31 PM:  - signals.mjs
5:06:31 PM:  - simple-login.mjs
5:06:31 PM:  - test.mjs
5:06:31 PM:  - user-subscription-status.mjs
5:06:31 PM:  - user-subscription.mjs
5:06:31 PM: â€‹
5:06:31 PM: âœ˜ [ERROR] Top-level await is currently not supported with the "cjs" output format
5:06:31 PM:     netlify/functions/server.mjs:7:23:
5:06:31 PM:       7 â”‚   const routesModule = await import('../../dist/server/routes.js');
5:06:31 PM:         â•µ                        ~~~~~
5:06:31 PM: âœ˜ [ERROR] Could not resolve "bcryptjs"
5:06:31 PM:     netlify/functions/login.mjs:3:19:
5:06:31 PM:       3 â”‚ import bcrypt from 'bcryptjs';
5:06:31 PM:         â•µ                    ~~~~~~~~~~
5:06:31 PM:   You can mark the path "bcryptjs" as external to exclude it from the bundle, which will remove this error and leave the unresolved path in the bundle.
5:06:32 PM: Failed during stage 'building site': Build script returned non-zero exit code: 2 (https://ntl.fyi/exit-code-2)
5:06:32 PM: â€‹
5:06:32 PM: Dependencies installation error                               
5:06:32 PM: â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5:06:32 PM: â€‹
5:06:32 PM:   Error message
5:06:32 PM:   A Netlify Function failed to require one of its dependencies.
5:06:32 PM:   Please make sure it is present in the site's top-level "package.json".
â€‹
5:06:32 PM:   Build failed with 1 error:
5:06:32 PM:   netlify/functions/login.mjs:3:19: ERROR: Could not resolve "bcryptjs"
5:06:32 PM: â€‹
5:06:32 PM:   Resolved config
5:06:32 PM:   build:
5:06:32 PM:     command: node build-netlify.js
5:06:32 PM:     commandOrigin: config
5:06:32 PM:     environment:
5:06:32 PM:       - NETLIFY_DATABASE_URL
5:06:32 PM:       - NETLIFY_DATABASE_URL_UNPOOLED
5:06:32 PM:       - OZOW_PRIVATE_KEY
5:06:32 PM:       - OZOW_SITE_CODE
5:06:32 PM:       - NODE_VERSION
5:06:32 PM:     publish: /opt/build/repo/dist/public
5:06:32 PM:     publishOrigin: config
5:06:32 PM:   functions:
5:06:32 PM:     "*":
5:06:32 PM:       node_bundler: esbuild
5:06:32 PM:   functionsDirectory: /opt/build/repo/netlify/functions
5:06:32 PM:   redirects:
5:06:32 PM:     - from: /api/login
5:06:32 PM:       status: 200
5:06:32 PM:       to: /.netlify/functions/emergency-login
5:06:32 PM:     - from: /api/plans
5:06:32 PM:       status: 200
5:06:32 PM:       to: /.netlify/functions/plans
5:06:32 PM:     - from: /api/signals
5:06:32 PM:       status: 200
5:06:32 PM:       to: /.netlify/functions/signals
5:06:32 PM:     - from: /api/admin/users
5:06:32 PM:       status: 200
5:06:32 PM:       to: /.netlify/functions/admin-users
5:06:32 PM:     - from: /api/admin/users/*/subscription
      status: 200
      to: /.netlify/functions/admin-user-subscription
    - from: /api/admin/signals
      status: 200
      to: /.netlify/functions/admin-signals
    - from: /api/user/subscription-status
      status: 200
      to: /.netlify/functions/user-subscription-status
    - from: /api/logout
      status: 200
      to: /.netlify/functions/logout
    - from: /api/placeholder/*/*
5:06:32 PM:       status: 200
5:06:32 PM:       to: /.netlify/functions/placeholder
5:06:32 PM:     - from: /api/*
      status: 200
      to: /.netlify/functions/server/:splat
    - from: /*
      status: 200
      to: /index.html
  redirectsOrigin: config
5:06:32 PM: Build failed due to a user error: Build script returned non-zero exit code: 2
5:06:32 PM: Failing build: Failed to build site
5:06:32 PM: Finished processing build request in 23.369s
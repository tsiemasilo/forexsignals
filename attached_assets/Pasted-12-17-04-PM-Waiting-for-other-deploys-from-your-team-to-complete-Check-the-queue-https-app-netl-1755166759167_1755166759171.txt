12:17:04 PM: Waiting for other deploys from your team to complete. Check the queue: https://app.netlify.com/teams/tsiemasilo/builds
12:17:18 PM: build-image version: e5074bde24e53715f94c72a3902b7868fbfe84e1 (noble)
12:17:18 PM: buildbot version: e5074bde24e53715f94c72a3902b7868fbfe84e1
12:17:18 PM: Fetching cached dependencies
12:17:18 PM: Starting to download cache of 423.7MB (Last modified: 2025-08-14 10:15:43 +0000 UTC)
12:17:20 PM: Finished downloading cache in 1.264s
12:17:20 PM: Starting to extract cache
12:17:30 PM: Finished extracting cache in 10.727s
12:17:30 PM: Finished fetching cache in 12.058s
12:17:30 PM: Starting to prepare the repo for build
12:17:31 PM: Preparing Git Reference refs/heads/main
12:17:32 PM: Custom functions path detected. Proceeding with the specified path: 'netlify/functions'
12:17:32 PM: Custom build command detected. Proceeding with the specified command: 'node build-netlify.js'
12:17:32 PM: Starting to install dependencies
12:17:32 PM: Started restoring cached python cache
12:17:33 PM: Finished restoring cached python cache
12:17:33 PM: Started restoring cached ruby cache
12:17:33 PM: Finished restoring cached ruby cache
12:17:34 PM: Started restoring cached go cache
12:17:35 PM: Finished restoring cached go cache
12:17:35 PM: Started restoring cached Node.js version
12:17:38 PM: Finished restoring cached Node.js version
12:17:38 PM: v20.19.4 is already installed.
12:17:39 PM: Now using node v20.19.4 (npm v10.8.2)
12:17:39 PM: Enabling Node.js Corepack
12:17:39 PM: Started restoring cached build plugins
12:17:39 PM: Finished restoring cached build plugins
12:17:39 PM: Started restoring cached corepack dependencies
12:17:39 PM: Finished restoring cached corepack dependencies
12:17:39 PM: No npm workspaces detected
12:17:39 PM: Started restoring cached node modules
12:17:39 PM: Finished restoring cached node modules
12:17:39 PM: Installing npm packages using npm version 10.8.2
12:17:39 PM: up to date in 499ms
12:17:39 PM: npm packages installed
12:17:40 PM: Successfully installed dependencies
12:17:40 PM: Starting build script
12:17:40 PM: Detected 1 framework(s)
12:17:40 PM: "vite" at version "5.4.19"
12:17:40 PM: Section completed: initializing
12:17:42 PM: ​
12:17:42 PM: Netlify Build                                                 
12:17:42 PM: ────────────────────────────────────────────────────────────────
12:17:42 PM: ​
12:17:42 PM: ❯ Version
12:17:42 PM:   @netlify/build 35.0.7
12:17:42 PM: ​
12:17:42 PM: ❯ Flags
12:17:42 PM:   accountId: 6786aa5b927658b4b62b93d6
12:17:42 PM:   baseRelDir: true
12:17:42 PM:   buildId: 689db7a00fcff00008bd142f
12:17:42 PM:   deployId: 689db7a00fcff00008bd1431
12:17:42 PM: ​
12:17:42 PM: ❯ Current directory
12:17:42 PM:   /opt/build/repo
12:17:42 PM: ​
12:17:42 PM: ❯ Config file
12:17:42 PM:   /opt/build/repo/netlify.toml
12:17:42 PM: ​
12:17:42 PM: ❯ Context
12:17:42 PM:   production
12:17:42 PM: ​
12:17:42 PM: ❯ Installing extensions
12:17:42 PM:    - neon
12:17:43 PM: ​
12:17:43 PM: ❯ Loading extensions
12:17:43 PM:    - neon
12:17:44 PM: ​
12:17:44 PM: build.command from netlify.toml                               
12:17:44 PM: ────────────────────────────────────────────────────────────────
12:17:44 PM: ​
12:17:44 PM: $ node build-netlify.js
12:17:44 PM: 🔧 Building for Netlify deployment...
12:17:44 PM: Building frontend...
12:17:44 PM: vite v5.4.19 building for production...
12:17:44 PM: transforming...
12:17:47 PM: ✓ 1733 modules transformed.
12:17:47 PM: rendering chunks...
12:17:47 PM: computing gzip size...
12:17:47 PM: ../dist/public/index.html                   0.63 kB │ gzip:   0.38 kB
12:17:47 PM: ../dist/public/assets/index-Cb07W4cv.css   85.62 kB │ gzip:  14.17 kB
12:17:47 PM: ../dist/public/assets/index-BPSE8Wcd.js   422.08 kB │ gzip: 127.39 kB
12:17:47 PM: ✓ built in 2.97s
12:17:47 PM: Building server...
12:17:47 PM: Building server/index.ts -> dist/server/index.js
12:17:47 PM:   dist/server/index.js  37.1kb
12:17:47 PM: ⚡ Done in 5ms
12:17:47 PM: Building server/routes.ts -> dist/server/routes.js
12:17:47 PM:   dist/server/routes.js  32.8kb
12:17:47 PM: ⚡ Done in 4ms
12:17:47 PM: Building server/db.ts -> dist/server/db.js
12:17:47 PM:   dist/server/db.js  4.9kb
12:17:47 PM: ⚡ Done in 3ms
12:17:47 PM: Building server/storage.ts -> dist/server/storage.js
12:17:47 PM:   dist/server/storage.js  18.9kb
12:17:47 PM: ⚡ Done in 3ms
12:17:47 PM:   dist/shared/schema.js  3.8kb
12:17:47 PM: ⚡ Done in 2ms
12:17:47 PM: ✅ Netlify build completed successfully!
12:17:47 PM: ​
12:17:47 PM: (build.command completed in 3.3s)
12:17:47 PM: ​
12:17:47 PM: Functions bundling                                            
12:17:47 PM: ────────────────────────────────────────────────────────────────
12:17:47 PM: ​
12:17:47 PM: Packaging Functions from netlify/functions directory:
12:17:47 PM:  - debug.mjs
12:17:47 PM:  - server.js
12:17:47 PM:  - simple-login.mjs
12:17:47 PM:  - test.mjs
12:17:47 PM: ​
12:17:47 PM: ▲ [WARNING] The CommonJS "module" variable is treated as a global variable in an ECMAScript module and may not work as expected [commonjs-variable-in-esm]
12:17:47 PM:     netlify/functions/server.js:4:0:
12:17:47 PM:       4 │ module.exports.handler = serverless(app);
12:17:47 PM:         ╵ ~~~~~~
12:17:47 PM:   This file is considered to be an ECMAScript module because the enclosing "package.json" file sets the type of this file to "module":
12:17:47 PM:     package.json:4:10:
12:17:47 PM:       4 │   "type": "module",
12:17:47 PM:         ╵           ~~~~~~~~
12:17:47 PM:   Node's package format requires that CommonJS files in a "type": "module" package use the ".cjs" file extension.
12:17:47 PM: ✘ [ERROR] Could not resolve "../../dist/index.js"
12:17:47 PM:     netlify/functions/server.js:2:20:
12:17:47 PM:       2 │ const app = require('../../dist/index.js');
12:17:47 PM:         ╵                     ~~~~~~~~~~~~~~~~~~~~~
12:17:48 PM: Failed during stage 'building site': Build script returned non-zero exit code: 2 (https://ntl.fyi/exit-code-2)
12:17:48 PM: ​
12:17:48 PM: Dependencies installation error                               
12:17:48 PM: ────────────────────────────────────────────────────────────────
12:17:48 PM: ​
12:17:48 PM:   Error message
12:17:48 PM:   A Netlify Function failed to require one of its dependencies.
12:17:48 PM:   Please make sure it is present in the site's top-level "package.json".
​
12:17:48 PM:   Build failed with 1 error:
12:17:48 PM:   netlify/functions/server.js:2:20: ERROR: Could not resolve "../../dist/index.js"
12:17:48 PM: ​
12:17:48 PM:   Resolved config
12:17:48 PM:   build:
12:17:48 PM:     command: node build-netlify.js
12:17:48 PM:     commandOrigin: config
12:17:48 PM:     environment:
12:17:48 PM:       - NETLIFY_DATABASE_URL
12:17:48 PM:       - NETLIFY_DATABASE_URL_UNPOOLED
12:17:48 PM:       - OZOW_PRIVATE_KEY
12:17:48 PM:       - OZOW_SITE_CODE
12:17:48 PM:       - NODE_VERSION
12:17:48 PM:     publish: /opt/build/repo/dist/public
12:17:48 PM:     publishOrigin: config
12:17:48 PM:   functions:
12:17:48 PM:     "*":
12:17:48 PM:       node_bundler: esbuild
12:17:48 PM:   functionsDirectory: /opt/build/repo/netlify/functions
12:17:48 PM:   redirects:
12:17:48 PM:     - from: /api/*
      status: 200
      to: /.netlify/functions/server/:splat
    - from: /*
      status: 200
      to: /index.html
  redirectsOrigin: config
12:17:48 PM: Build failed due to a user error: Build script returned non-zero exit code: 2
12:17:48 PM: Failing build: Failed to build site
12:17:49 PM: Finished processing build request in 30.044s